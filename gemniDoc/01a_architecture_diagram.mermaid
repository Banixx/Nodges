graph TD
%%{init: {'themeVariables': {'darkMode': false, 'primaryColor': '#EBEBEB', 'primaryTextColor': '#333', 'background': '#FFFFFF'}}}%%
    subgraph "Browser / User"
        A[User Input: Mouse, Keyboard]
    end

    subgraph "Core System"
        B(CentralEventManager)
        C(InteractionManager)
        D(StateManager)
        E(HighlightManager)
        F(UIManager)
        G(LayoutManager)
        H[NodgesApp Orchestrator]
    end

    subgraph "3D Scene (Three.js)"
        I[Scene Graph: Node Meshes, Edge Meshes]
    end
    
    subgraph "Data Layer"
      J[JSON Files]
    end

    %% Styling (Druckfreundliches Pastell-Schema)
    style Core System fill:#DDEEDD,stroke:#999,stroke-width:2px;
    style A fill:#FFF1C1,stroke:#999,stroke-width:2px,color:#999;
    style B fill:#FFFFFF,stroke:#999,stroke-width:2px,color:#333;
    style C fill:#FFFFFF,stroke:#999,stroke-width:2px,color:#333;
    style D fill:#FFFFFF,stroke:#555,stroke-width:2px,color:#333;
    style E fill:#FFFFFF,stroke:#999,stroke-width:2px,color:#333;
    style F fill:#FFFFFF,stroke:#999,stroke-width:2px,color:#333;
    style G fill:#FFFFFF,stroke:#999,stroke-width:2px,color:#333;
    style H fill:#FFFFFF,stroke:#999,stroke-width:2px,color:#333;
    style I fill:#F0F3F4,stroke:#999,stroke-width:2px,color:#999;
    style J fill:#DDFFDD,stroke:#999,stroke-width:2px,color:#999;

    %% Data Flow
    J -- "loadData()" --> H;
    H -- "createNodes(), createEdges()" --> I;
    G -- "applyLayout()" --> I;
    
    %% Event & State Flow
    A -- "DOM Events" --> B;
    B -- "Semantic Events (click, hover)" --> C;
    C -- "Updates State (setSelectedObject)" --> D;
    D -- "Notifies Subscribers" --> E;
    D -- "Notifies Subscribers" --> F;
    E -- "Applies Visual Effects (Color, Glow)" --> I;
    F -- "Updates HTML Panels" --> A;
